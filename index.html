<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesis de Maestr√≠a ‚Äî Optimizando un LLM con Reconocimiento de Voz para Pre-Consulta M√©dica y Agilizaci√≥n de la Atenci√≥n al Paciente | Maestr√≠a en Ingenier√≠a y Ciencia de Datos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Paleta: beige claro, texto azul gris√°ceo, acentos slate/indigo/teal -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f5f3f0; color: #334155; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; }
        .nav-link:hover, .nav-link.active { color: #435a7d; border-bottom-color: #435a7d; }
        .architecture-node { transition: all 0.3s; cursor: pointer; }
        .architecture-node:hover, .architecture-node.active { transform: scale(1.05); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); border-color: #60a5fa; }
        .badge { display: inline-flex; align-items: center; gap: .4rem; font-size: .75rem; border-radius: 9999px; padding: .25rem .6rem; background: #eef2ff; color: #3730a3; border: 1px solid #c7d2fe; }
        .callout { background: #fff; border-left: 4px solid #14b8a6; }
        code { background: #f1f5f9; padding: .1rem .35rem; border-radius: .25rem; }
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4">
            <ul class="flex justify-center items-center space-x-4 sm:space-x-8 text-sm sm:text-base font-medium text-slate-600">
                <li><a href="#vision" class="nav-link py-2 border-b-2 border-transparent">Visi√≥n</a></li>
                <li><a href="#problema" class="nav-link py-2 border-b-2 border-transparent">Problema</a></li>
                <li><a href="#solucion" class="nav-link py-2 border-b-2 border-transparent">Soluci√≥n</a></li>
                <li><a href="#objetivos" class="nav-link py-2 border-b-2 border-transparent">Objetivos</a></li>
                <li><a href="#diferenciacion" class="nav-link py-2 border-b-2 border-transparent">Diferenciaci√≥n</a></li>
                <li><a href="#arquitectura" class="nav-link py-2 border-b-2 border-transparent">Arquitectura</a></li>
                <li><a href="#componentes" class="nav-link py-2 border-b-2 border-transparent">Componentes</a></li>
                <li><a href="#mvp" class="nav-link py-2 border-b-2 border-transparent">MVP</a></li>
                <li><a href="presentacion.html" class="bg-slate-800 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors duration-200 font-medium">Ver en Diapositiva</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        <!-- VISI√ìN -->
        <section id="vision" class="min-h-screen flex flex-col justify-center items-center text-center">
  <h1 class="text-3xl md:text-5xl font-bold text-slate-800">
    Tesis de Maestr√≠a: Optimizando un LLM con Reconocimiento de Voz
    para Pre-Consulta M√©dica y Agilizaci√≥n de la Atenci√≥n al Paciente
  </h1>

  <p class="mt-3 text-base md:text-lg text-slate-600">
    Maestr√≠a en Ingenier√≠a y Ciencia de Datos
  </p>

  <p class="mt-6 text-lg md:text-xl text-slate-600 max-w-4xl">
    Pre-consulta conversacional en espa√±ol con <strong>ASR m√©dico</strong>, <strong>motor sem√°ntico</strong> (MedLexSp + SNOMED ES)
    e <strong>interoperabilidad SMART on FHIR</strong> para entregar un resumen <em>citable</em> al cl√≠nico.
  </p>

  <p class="mt-4 max-w-3xl text-slate-500">
    Seguridad de doble capa: <strong>RBAC antes del LLM</strong> + <strong>FedRAG</strong> (fusi√≥n RRF), con opci√≥n de <strong>TEEs</strong>.
  </p>

  <div class="mt-6 flex flex-wrap justify-center gap-2">
    <span class="badge">üîê RBAC pre-LLM</span>
    <span class="badge">üß† RAG‚ÜíFedRAG (RRF)</span>
    <span class="badge">ü©∫ ASR: mWER + F1</span>
    <span class="badge">üè∑Ô∏è SMART on FHIR scopes</span>
    <span class="badge">üõ°Ô∏è TEEs opcional</span>
  </div>

  <div class="mt-12 animate-bounce">
    <a href="#problema" aria-label="Bajar a la siguiente secci√≥n" class="text-slate-500">
      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </a>
  </div>
</section>

        <!-- PROBLEMA -->
        <section id="problema" class="py-20">
            <h2 class="text-3xl font-bold text-center mb-12 text-slate-800">El Problema: Ineficiencias en la Consulta</h2>
            <p class="max-w-3xl mx-auto text-center mb-12">La ingesta manual roba minutos valiosos al diagn√≥stico/plan. Estandarizar y <em>citar</em> lo que el paciente cuenta, antes de la cita, eleva calidad y seguridad.</p>
            
            <div class="max-w-3xl mx-auto mt-8 bg-white p-5 rounded-lg shadow">
              <h3 class="font-semibold mb-2">Planteamiento del problema</h3>
              <p>En la consulta ambulatoria, la <strong>ingesta cl√≠nica previa</strong> sigue siendo manual y dispersa,
                 lo que consume tiempo de alto valor y favorece omisiones. Estudios observacionales muestran que,
                 por cada hora de atenci√≥n directa, los cl√≠nicos invierten casi <strong>dos horas</strong> en EHR y tareas
                 administrativas, desplazando el foco cl√≠nico y afectando la experiencia de pacientes y profesionales.</p>
              <p>La propuesta aborda esta brecha con una <strong>pre-consulta estructurada y citable</strong>, en espa√±ol nativo,
                 integrada al EHR (SMART on FHIR) y con seguridad de doble capa (RBAC pre-LLM + FedRAG), para transformar la
                 consulta en un espacio de <em>razonamiento</em> en vez de recolecci√≥n de datos.</p>
            </div>

            <div class="chart-container mx-auto mt-12">
                <canvas id="timeChart"></canvas>
            </div>
            <p class="text-center text-sm text-slate-500 mt-4">Distribuci√≥n del tiempo en una consulta de 15 min (ejemplo). Nuestro objetivo: reducir la ‚Äúrecopilaci√≥n‚Äù previa.</p>
        </section>

        <!-- SOLUCI√ìN -->
        <section id="solucion" class="py-20 bg-white rounded-2xl shadow-lg">
            <h2 class="text-3xl font-bold text-center mb-12 text-slate-800">Soluci√≥n: Pre-Consulta Conversacional, Estructurada y Citable</h2>
            <p class="max-w-3xl mx-auto text-center mb-12">El paciente responde por voz antes de la cita; guiamos la entrevista, normalizamos lenguaje coloquial y armamos un <strong>resumen FHIR</strong> con fuentes (EHR/gu√≠as) y trazabilidad.</p>
            <div class="flex flex-col md:flex-row items-center justify-center space-y-8 md:space-y-0 md:space-x-8 text-center">
                <div class="flex flex-col items-center">
                    <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-blue-500 text-3xl">üó£Ô∏è</div>
                    <p class="mt-4 font-semibold">Paciente (voz)</p>
                </div>
                <div class="text-4xl text-slate-400">‚Üí</div>
                <div class="flex flex-col items-center">
                    <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-500 text-3xl">ü§ñ</div>
                    <p class="mt-4 font-semibold">Gestor de di√°logo + Motor sem√°ntico</p>
                    </div>
                <div class="text-4xl text-slate-400">‚Üí</div>
                <div class="flex flex-col items-center">
                    <div class="w-24 h-24 bg-teal-100 rounded-full flex items-center justify-center text-teal-500 text-3xl">üìã</div>
                    <p class="mt-4 font-semibold">Resumen FHIR citable</p>
                </div>
            </div>
        </section>

        <!-- OBJETIVOS -->
        <section id="objetivos" class="py-20">
  <h2 class="text-3xl font-bold text-center mb-8 text-slate-800">Objetivo General y Espec√≠ficos</h2>

  <div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow">
    <h3 class="font-semibold mb-2">Objetivo General</h3>
    <p>Dise√±ar y validar un sistema de <strong>pre-consulta conversacional en espa√±ol</strong> que integre
       <strong>ASR optimizado</strong>, <strong>motor sem√°ntico</strong> (MedLexSp + SNOMED ES) y <strong>RAG</strong>
       con <strong>RBAC pre-LLM</strong> y <strong>SMART on FHIR</strong>, capaz de generar un <strong>resumen FHIR citable</strong>
       que mejore la eficiencia y la calidad de la consulta.</p>

    <h3 class="font-semibold mt-6 mb-2">Objetivos Espec√≠ficos</h3>
    <ul class="list-disc pl-6 space-y-2">
      <li>Entrenar/afinar el ASR (Whisper+LoRA) para espa√±ol m√©dico y medir <em>mWER</em> y <em>F1</em> de entidades.</li>
      <li>Construir el motor sem√°ntico (MedLexSp + SNOMED ES) con validaci√≥n cl√≠nica de coloquialismos.</li>
      <li>Implementar <strong>RAG local</strong> con <strong>RBAC</strong> basado en <code>patient/*.read</code> y <code>user/*.read</code> (SMART on FHIR), garantizando trazabilidad de fuentes.</li>
      <li>Evaluar la calidad de la nota con <strong>PDQI-9</strong>, fidelidad a fuentes y precisi√≥n/exhaustividad contextual del RAG.</li>
      <li>Plan de escalado a <strong>FedRAG</strong> con fusi√≥n <em>RRF</em> y exploraci√≥n de <strong>TEEs</strong> para proteger datos en uso.</li>
    </ul>
                    </div>
</section>
        
        <!-- DIFERENCIACI√ìN -->
        <section id="diferenciacion" class="py-20">
            <h2 class="text-3xl font-bold text-center mb-12 text-slate-800">Diferenciaci√≥n en el Mercado</h2>
            <p class="max-w-3xl mx-auto text-center mb-12">No competimos con triaje ni con scribing en consulta; <strong>preparamos</strong> la consulta con evidencia y permisos correctos.</p>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto text-center">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-lg text-slate-800">No es un Ambient Scribe</h3>
                    <p class="mt-2 text-sm text-slate-600">Abridge/DAX ya soportan espa√±ol, pero documentan <strong>durante</strong> la consulta. Aqu√≠ hacemos <strong>antes</strong> la ingesta estructurada y citable para el cl√≠nico.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-lg text-slate-800">No es un Symptom Checker</h3>
                    <p class="mt-2 text-sm text-slate-600">Ada/Mediktor orientan el siguiente paso; nosotros <strong>no diagnosticamos</strong>: recopilamos y normalizamos para el flujo del m√©dico.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-lg text-slate-800">Novedad Coherente</h3>
                    <p class="mt-2 text-sm text-slate-600">Pre-consulta estructurada con <strong>RBAC pre-LLM</strong> + <strong>FedRAG</strong> (fusi√≥n <em>RRF</em>) y foco en <strong>espa√±ol nativo</strong>.</p>
                </div>
            </div>
        </section>

        <!-- ARQUITECTURA -->
        <section id="arquitectura" class="py-20">
            <h2 class="text-3xl font-bold text-center mb-4 text-slate-800">Arquitectura: Privacidad y Seguridad por Dise√±o</h2>
            <p class="max-w-3xl mx-auto text-center mb-12">RAG local (MVP) que evoluciona a <strong>FedRAG</strong>. El <strong>RBAC</strong> se aplica en el <em>recuperador</em> (antes del LLM) usando <strong>SMART on FHIR</strong> (scopes). Opcionalmente, <strong>TEEs</strong> protegen datos <em>en uso</em>.</p>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                <div class="flex flex-col space-y-4 items-center lg:items-end">
                    <div id="node-hospital" class="architecture-node w-full max-w-sm bg-white p-4 rounded-lg border-2 border-slate-200 text-center">
                        <p class="font-bold">üè• Hospital A (FHIR Server)</p>
                        <p class="text-sm">Base de conocimiento local</p>
                    </div>
                    <div id="node-clinica" class="architecture-node w-full max-w-sm bg-white p-4 rounded-lg border-2 border-slate-200 text-center">
                        <p class="font-bold">üè† Cl√≠nica B (FHIR Server)</p>
                        <p class="text-sm">Residencia y soberan√≠a de datos</p>
                    </div>
                </div>
                
                <div class="flex flex-col items-center text-center">
                    <div id="node-orquestador" class="architecture-node w-full max-w-sm bg-indigo-100 p-6 rounded-lg border-2 border-indigo-200 mb-4">
                        <p class="font-bold text-indigo-800">Orquestador Central</p>
                        <p class="text-sm text-indigo-600">Consulta nodos, aplica RBAC, fusiona con RRF</p>
                    </div>
                    <div class="text-slate-400 font-mono text-sm my-2">&lt;-- Consultas --&gt;</div>
                    <div id="node-llm" class="architecture-node w-full max-w-sm bg-teal-100 p-6 rounded-lg border-2 border-teal-200 mt-4">
                        <p class="font-bold text-teal-800">LLM Optimizado</p>
                        <p class="text-sm text-teal-600">Recibe solo contexto autorizado</p>
                    </div>
                </div>

                <div class="flex flex-col space-y-4 items-center lg:items-start">
                    <div id="node-investigacion" class="architecture-node w-full max-w-sm bg-white p-4 rounded-lg border-2 border-slate-200 text-center">
                        <p class="font-bold">üî¨ Gu√≠as Cl√≠nicas</p>
                        <p class="text-sm">Repositorio p√∫blico</p>
                        </div>
                    <div id="node-gobierno" class="architecture-node w-full max-w-sm bg-white p-4 rounded-lg border-2 border-slate-200 text-center">
                        <p class="font-bold">üèõÔ∏è App SMART on FHIR</p>
                        <p class="text-sm">Cliente (Paciente/M√©dico)</p>
                    </div>
                </div>
            </div>
            <div id="architecture-info" class="mt-12 bg-white p-6 rounded-lg shadow-md max-w-3xl mx-auto text-center min-h-[120px]">
                <p class="text-slate-500">Haz clic en un componente de la arquitectura para ver su descripci√≥n.</p>
            </div>

            <div class="mt-8 max-w-3xl mx-auto callout p-4 rounded-md">
                <p class="text-sm text-slate-700"><strong>Nota:</strong> RRF (Reciprocal Rank Fusion) combina listas por <em>Œ£ 1/(k + rango)</em>, robusto a escalas heterog√©neas entre nodos. TEEs (p. ej., Azure CVMs con AMD SEV-SNP / Intel TDX) protegen datos en memoria durante la agregaci√≥n/inferencia.</p>
            </div>
        </section>

        <!-- COMPONENTES -->
        <section id="componentes" class="py-20">
            <h2 class="text-3xl font-bold text-center mb-12 text-slate-800">Componentes de Optimizaci√≥n</h2>
            <div class="max-w-4xl mx-auto">
                <div class="flex border-b border-slate-300">
                    <button data-tab="asr" class="tab-button flex-1 py-3 px-4 text-center font-medium bg-white border-b-2 border-blue-500">ASR de Alta Fidelidad</button>
                    <button data-tab="contexto" class="tab-button flex-1 py-3 px-4 text-center font-medium text-slate-500 bg-slate-50">Contexto Ling√º√≠stico</button>
                    <button data-tab="acceso" class="tab-button flex-1 py-3 px-4 text-center font-medium text-slate-500 bg-slate-50">Seguridad y Evaluaci√≥n</button>
                            </div>
                <div class="bg-white p-8 rounded-b-lg shadow">
                    <!-- ASR -->
                    <div id="asr" class="tab-content">
                        <h3 class="font-bold text-lg mb-2">ASR Enfocado en Entidades M√©dicas</h3>
                        <p>Se afina Whisper (LoRA) con datos pseudo-sint√©ticos y <strong>lexicon biasing</strong> de f√°rmacos/s√≠ntomas. M√©tricas primarias: <strong>medical-WER (mWER)</strong> y <strong>F1 de entidades</strong>. El WER global pasa a segundo plano frente a errores cl√≠nicamente cr√≠ticos.</p>
                        <div class="mt-4 bg-slate-50 p-4 rounded-lg">
                            <p class="font-mono text-sm"><span class="font-bold text-green-600">M√©trica Primaria:</span> Reconocer ‚Äúlosart√°n 50 mg‚Äù, ‚Äúcefalea intensa‚Äù.</p>
                            <p class="font-mono text-sm mt-2"><span class="font-bold text-red-600">M√©trica Secundaria:</span> Errores en muletillas (‚Äúpues‚Äù, ‚Äúeste‚Äù).</p>
                        </div>
                    </div>
                    <!-- CONTEXTO -->
                    <div id="contexto" class="tab-content hidden">
                        <h3 class="font-bold text-lg mb-2">Motor Sem√°ntico Anclado a Est√°ndares</h3>
                        <p>Interpretamos jerga (‚Äúdolor de maceta‚Äù) con <strong>SNOMED CT (edici√≥n ES)</strong> y <strong>MedLexSp</strong>, m√°s validaci√≥n cl√≠nica de regionalismos (MX/LatAm). Genera pares <em>coloquial‚Üíc√≥digo</em> como activo de datos.</p>
                        <div class="mt-4 flex space-x-4">
                            <div class="flex-1 bg-blue-50 p-4 rounded-lg text-center">
                                <p class="font-semibold text-blue-800">Expresi√≥n Coloquial</p>
                                <p class="mt-2 text-2xl">‚ÄúAnginas‚Äù</p>
                            </div>
                            <div class="flex-1 bg-teal-50 p-4 rounded-lg text-center">
                                <p class="font-semibold text-teal-800">Mapeo a SNOMED CT</p>
                                <p class="mt-2 text-2xl">Faringoamigdalitis</p>
                            </div>
                        </div>
                    </div>
                    <!-- ACCESO -->
                    <div id="acceso" class="tab-content hidden">
                        <h3 class="font-bold text-lg mb-2">Control de Acceso y Evaluaci√≥n</h3>
                        <p><strong>RBAC en recuperaci√≥n</strong> (no en el prompt): filtramos por rol usando <strong>SMART on FHIR</strong> (OAuth 2.0 scopes) antes de construir el contexto. Seguridad/veracidad con <strong>SafetyBench</strong> y <strong>TruthfulQA</strong>; calidad de la nota con <strong>PDQI-9</strong> + chequeo de fidelidad a fuentes.</p>
                        <div class="mt-4 bg-slate-50 p-4 rounded-lg">
                            <p class="font-mono text-sm"><span class="font-bold text-indigo-600">M√©dico ‚Üí</span> scopes como <code>user/*.read</code> habilitan antecedentes completos + gu√≠as.</p>
                            <p class="font-mono text-sm mt-2"><span class="font-bold text-blue-600">Paciente ‚Üí</span> scopes como <code>patient/*.read</code> limitan a su propio EHR + conocimiento general.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- MVP -->
        <section id="mvp" class="py-20">
            <h2 class="text-3xl font-bold text-center mb-12 text-slate-800">MVP</h2>
            <p class="max-w-3xl mx-auto text-center mb-12">Validaci√≥n en una instituci√≥n con RAG local + SMART on FHIR. KPIs: mWER &lt;10%, F1 entidades &gt;0.80, PDQI-9 &gt;4.0/5 y &lt;15% edici√≥n de nota.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <div class="text-3xl mb-4">1Ô∏è‚É£</div>
                    <h3 class="font-bold">Un Sistema de Salud</h3>
                    <p class="text-sm mt-2">RAG local sobre FHIR + gu√≠as internas; preparaci√≥n para FedRAG.</p>
                        </div>
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <div class="text-3xl mb-4">2Ô∏è‚É£</div>
                    <h3 class="font-bold">Login SMART on FHIR</h3>
                    <p class="text-sm mt-2">RBAC conectado a scopes <code>patient/*.read</code> y <code>user/*.read</code>.</p>
                        </div>
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <div class="text-3xl mb-4">3Ô∏è‚É£</div>
                    <h3 class="font-bold">ASR Enfocado</h3>
                    <p class="text-sm mt-2">Whisper + LoRA + <em>lexicon biasing</em>. M√©tricas: mWER y F1.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <div class="text-3xl mb-4">4Ô∏è‚É£</div>
                    <h3 class="font-bold">Motor Sem√°ntico</h3>
                    <p class="text-sm mt-2">MedLexSp + SNOMED ES con validaci√≥n cl√≠nica.</p>
                </div>
            </div>

            <div class="mt-10 max-w-3xl mx-auto bg-amber-50 border border-amber-200 p-4 rounded-lg text-amber-900">
                <p class="text-sm"><strong>Licenciamiento SNOMED CT (MX):</strong> M√©xico no es miembro; uso comercial requiere licencia de no-miembro (~USD 1,303/a√±o para instituciones Banda B). Planificar alta en MLDS y costearlo desde el MVP.</p>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200">
  <div class="container mx-auto px-6 py-8 text-center text-slate-500">
    <p>Tesis de Maestr√≠a ‚Äî Maestr√≠a en Ingenier√≠a y Ciencia de Datos.</p>
                    </div>
</footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ---- Chart ----
            const timeCtx = document.getElementById('timeChart').getContext('2d');
            new Chart(timeCtx, {
                type: 'bar',
                data: {
                    labels: ['Recopilaci√≥n', 'Examen/Diagn√≥stico', 'Plan/Documentaci√≥n'],
                    datasets: [{
                        label: 'Minutos por Actividad',
                        data: [6, 5, 4],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(139, 92, 246, 0.7)',
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(139, 92, 246, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (ctx) => `${ctx.label}: ${ctx.raw} min` } }
                    },
                    scales: {
                        x: { beginAtZero: true, title: { display: true, text: 'Tiempo (minutos)' } }
                    }
                }
            });

            // ---- Arquitectura interactiva ----
            const archNodes = document.querySelectorAll('.architecture-node');
            const archInfo = document.getElementById('architecture-info');
            const archDescriptions = {
                'node-hospital': '<strong>Servidor FHIR de Hospital A:</strong> Historiales estructurados. Los datos no salen; solo se devuelven fragmentos autorizados.',
                'node-clinica': '<strong>Servidor FHIR de Cl√≠nica B:</strong> Mantiene residencia/soberan√≠a. Aplica RBAC local al responder.',
                'node-orquestador': '<strong>Orquestador Central:</strong> Env√≠a consulta con rol, recibe fragmentos de cada nodo, <em>filtra por permisos</em> y fusiona con <em>RRF</em>. Opcional: ejecuta en TEEs.',
                'node-llm': '<strong>LLM Optimizado:</strong> Recibe contexto <em>ya filtrado</em>. No ve ni almacena datos no autorizados.',
                'node-investigacion': '<strong>Gu√≠as Cl√≠nicas:</strong> Evidencia y protocolos para fundamentar preguntas/resumen.',
                'node-gobierno': '<strong>App SMART on FHIR:</strong> Gestiona login OAuth2 y scopes; define rol/alcances para la recuperaci√≥n.'
            };
            archNodes.forEach(node => {
                node.addEventListener('click', () => {
                    archNodes.forEach(n => n.classList.remove('active'));
                    node.classList.add('active');
                    archInfo.innerHTML = `<p class="text-slate-700">${archDescriptions[node.id]}</p>`;
                });
            });

            // ---- Tabs ----
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.dataset.tab;
                    tabs.forEach(t => { t.classList.remove('bg-white','border-blue-500'); t.classList.add('bg-slate-50','text-slate-500'); });
                    tab.classList.add('bg-white','border-blue-500'); tab.classList.remove('bg-slate-50','text-slate-500');
                    contents.forEach(c => c.classList.toggle('hidden', c.id !== target));
                });
            });

            // ---- Nav activo on scroll ----
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });
            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
